# 데이터베이스 검증 체크리스트

## ✅ 데이터 분리 검증

### Web1 (생존자 설문)

- [x] `users` 컬렉션만 사용
- [x] `patients` 컬렉션만 사용
- [x] `surveyResults` 컬렉션만 사용
- [x] `counselingRequests` 컬렉션만 사용
- [x] `patients_` 접두사 컬렉션 사용 안 함
- [x] `community_` 접두사 컬렉션 사용 안 함

### Web3 (환자 설문)

- [x] `patients_users` 컬렉션만 사용
- [x] `patients_patients` 컬렉션만 사용
- [x] `patients_surveyResults` 컬렉션만 사용
- [x] `patients_counselingRequests` 컬렉션만 사용
- [x] 접두사 없는 컬렉션 사용 안 함
- [x] `community_` 접두사 컬렉션 사용 안 함

### Web2 (대시보드)

- [x] `socialWorkers` 컬렉션만 사용 (의료 종사자)
- [x] 통합 조회만 사용 (읽기 전용)
- [x] 타입별 쓰기는 통합 함수 사용
- [x] 하드코딩된 컬렉션 이름 사용 안 함

### Web4 (커뮤니티)

- [x] `community_users` 컬렉션만 사용
- [x] `community_posts` 컬렉션만 사용
- [x] `user_surveys` 컬렉션만 사용
- [x] `socialWorkers` 컬렉션 읽기만 (의료 종사자 확인)
- [x] 설문 관련 컬렉션 직접 접근 안 함

## ✅ 대시보드 통합 검증

### 환자 목록 표시

- [x] Web1 설문 데이터 표시됨
- [x] Web3 설문 데이터 표시됨
- [x] 타입 필터 작동 (생존자/환자/전체)
- [x] 중요한 필드 모두 표시:
  - [x] 이름
  - [x] 생년월일
  - [x] 암 종류
  - [x] 진단 시기
  - [x] 위험도
  - [x] 상담 요청
  - [x] 상담 상태
  - [x] 보관 여부
- [x] 타입 배지로 구분 표시
- [x] 실시간 업데이트 작동

### 통계 표시

- [x] 전체 환자 수 표시
- [x] 신규 환자 수 표시
- [x] 위험군 환자 수 표시
- [x] 상담 요청 수 표시
- [x] Web1/Web3 통합 통계 계산

## ✅ 상세 페이지 검증

### 데이터 로드

- [x] Web1 환자 상세 정보 정상 로드
- [x] Web3 환자 상세 정보 정상 로드
- [x] 타입 자동 감지 작동
- [x] 올바른 컬렉션에서 데이터 로드

### 탭별 데이터 표시

- [x] 기본 정보 탭:
  - [x] 이름, 생년월일 표시
  - [x] 암 종류, 진단일 표시
  - [x] 연락처 정보 표시
  - [x] 치료/수술 정보 표시
- [x] 건강 상태 탭:
  - [x] 설문 점수 표시
  - [x] 위험도 표시
  - [x] 피드백 표시
- [x] 설문 결과 탭:
  - [x] 설문 답변 표시
  - [x] 점수 상세 표시
  - [x] 카테고리별 점수 표시
- [x] 상담 기록 탭:
  - [x] 상담 요청 목록 표시
  - [x] 상담 기록 표시

### 기능 작동

- [x] 상담 상태 업데이트 작동
- [x] 보관 처리 작동
- [x] 보관 해제 작동

## ✅ 데이터 무결성 검증

### 컬렉션 분리

- [x] Web1 데이터는 Web1 컬렉션에만 저장
- [x] Web3 데이터는 Web3 컬렉션에만 저장
- [x] Web4 데이터는 Web4 컬렉션에만 저장
- [x] 데이터 충돌 없음

### 타입 구분

- [x] 통합 조회 시 타입 필드 추가
- [x] UI에서 타입별 구분 표시
- [x] 타입별 필터링 작동

### 에러 처리

- [x] 컬렉션 접근 실패 시 에러 처리
- [x] 데이터 없음 시 적절한 메시지
- [x] 타입 감지 실패 시 에러 처리

## 🎯 최종 확인

### 데이터베이스 구조

- ✅ 모든 컬렉션이 올바르게 분리됨
- ✅ 충돌 가능성 없음
- ✅ 각 웹의 데이터가 독립적으로 관리됨

### 대시보드

- ✅ Web1과 Web3 데이터 모두 표시
- ✅ 필터링 작동
- ✅ 중요한 정보 모두 표시
- ✅ 실시간 업데이트 작동

### 상세 페이지

- ✅ Web1/Web3 자동 감지
- ✅ 모든 데이터 정상 로드
- ✅ 모든 기능 정상 작동
- ✅ 모든 탭에서 데이터 정상 표시

## 📝 사용 가이드

### Web2 대시보드 사용법

1. 기본값: "전체" 모드 (생존자 + 환자 모두 표시)
2. 필터: "생존자 설문", "환자 설문", "전체" 선택 가능
3. 환자 클릭: 상세 페이지로 이동 (타입 자동 감지)

### Web2 상세 페이지

- 자동으로 Web1/Web3 구분
- 올바른 컬렉션에서 데이터 로드
- 모든 기능 정상 작동
